name: Lolipop Final Deploy

on:
  push:
    branches: [ main ]

jobs:
  deploy-job:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      # SFTP（SSHパスワード）に特化した別のツールに切り替えます
      - name: SFTP Deploy (Password)
        uses: svenstaro/upload-sftp-action@v2
        with:
          server: ${{ secrets.LOLIPOP_HOST }}
          username: ${{ secrets.LOLIPOP_USER }}
          password: ${{ secrets.LOLIPOP_PASSWORD }}
          port: 2222
          # 転送したいファイル（全部）
          file_source: './*'
          # ★ここをロリポップのフルパスに書き換えてください
          server_destination: /home/users/0/sub.jp-houseinfo/web/houseinfo/lp/test-site/
