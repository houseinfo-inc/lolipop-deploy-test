name: Lolipop Final Deploy

on:
  push:
    branches: [ main ]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      # 非常に安定している「wlixcc/SFTP-Deploy-Action」を使用します
      - name: SFTP Deploy
        uses: wlixcc/SFTP-Deploy-Action@v1.2.4
        with:
          username: ${{ secrets.LOLIPOP_USER }}
          password: ${{ secrets.LOLIPOP_PASSWORD }}
          server: ${{ secrets.LOLIPOP_HOST }}
          port: 2222
          # 転送元のパス（リポジトリの全ファイル）
          local_path: './'
          # ★転送先のフルパス（最後に必ず / をつけてください）
          remote_path: '/home/users/0/sub.jp-houseinfo/web/houseinfo/lp/test-site/'
          # 同期時にサーバー側の古いファイルを消したくない場合は false
          delete_remote_files: false
